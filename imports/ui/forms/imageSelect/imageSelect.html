<template name="afImageSelect">
	{{#unless galleryMode}}
		<div class="card">
			<div class="card-body bg-white d-flex">
				{{#with selectedImage}}
					<button class="btn btn-primary open-gallery-button">
						<i class="fa fas fa-fw fa-edit"></i>
					</button>
					<figure class="figure border border-light p-1 shadow">
						{{#with link this}}
                            {{> image src=this title=../name alt=../name class="figure-img img-fluid rounded" cors="Anonymous"}}
							<figcaption class="figure-caption p-1">
								{{../name}}
								<button class="btn btn-sm btn-outline-danger border-0 remove-image-button">
									<i class="fa fas fa-fw fa-times"></i>
								</button>
							</figcaption>
						{{/with}}
					</figure>
				{{else}}
					<button class="btn btn-primary open-gallery-button">
						<i class="fa fas fa-fw fa-plus"></i>
					</button>
				{{/with}}
			</div>
		</div>
	{{else}}
		<div class="card afis-fullscreen">
			<div class="card-header d-flex">
				<span>{{label}}</span>
				<button class="btn btn-sm btn-outline-secondary close-gallery-button">
					<i class="fa fas fa-fw fa-times"></i>
				</button>
			</div>
			<div class="card-body bg-white row">
				{{#each imageDoc in images}}
					<div class="col">
						<figure class="figure border border-light p-1 shadow">
							{{#with link imageDoc}}
								<a href class="image-select" data-target="{{imageDoc._id}}">
                                    {{> image src=this title=imageDoc.name alt=imageDoc.name class="figure-img img-fluid rounded" cors="Anonymous"}}
								</a>
								<figcaption class="figure-caption p-1">
									{{imageDoc.name}}
								</figcaption>
							{{/with}}
						</figure>
					</div>
				{{/each}}
			</div>
		</div>
	{{/unless}}

	<!-- autoform related -->
	<input type="hidden" class="afImageSelectHiddenInput" data-schema-key="{{dataSchemaKey}}" />
</template>